(()=>{"use strict";var e={343:e=>{var t,i="object"==typeof Reflect?Reflect:null,s=i&&"function"==typeof i.apply?i.apply:function(e,t,i){return Function.prototype.apply.call(e,t,i)};t=i&&"function"==typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var r=Number.isNaN||function(e){return e!=e};function n(){n.init.call(this)}e.exports=n,e.exports.once=function(e,t){return new Promise((function(i,s){function r(i){e.removeListener(t,n),s(i)}function n(){"function"==typeof e.removeListener&&e.removeListener("error",r),i([].slice.call(arguments))}p(e,t,n,{once:!0}),"error"!==t&&function(e,t,i){"function"==typeof e.on&&p(e,"error",t,{once:!0})}(e,r)}))},n.EventEmitter=n,n.prototype._events=void 0,n.prototype._eventsCount=0,n.prototype._maxListeners=void 0;var o=10;function a(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function c(e){return void 0===e._maxListeners?n.defaultMaxListeners:e._maxListeners}function h(e,t,i,s){var r,n,o,h;if(a(i),void 0===(n=e._events)?(n=e._events=Object.create(null),e._eventsCount=0):(void 0!==n.newListener&&(e.emit("newListener",t,i.listener?i.listener:i),n=e._events),o=n[t]),void 0===o)o=n[t]=i,++e._eventsCount;else if("function"==typeof o?o=n[t]=s?[i,o]:[o,i]:s?o.unshift(i):o.push(i),(r=c(e))>0&&o.length>r&&!o.warned){o.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=o.length,h=l,console&&console.warn&&console.warn(h)}return e}function l(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function u(e,t,i){var s={fired:!1,wrapFn:void 0,target:e,type:t,listener:i},r=l.bind(s);return r.listener=i,s.wrapFn=r,r}function d(e,t,i){var s=e._events;if(void 0===s)return[];var r=s[t];return void 0===r?[]:"function"==typeof r?i?[r.listener||r]:[r]:i?function(e){for(var t=new Array(e.length),i=0;i<t.length;++i)t[i]=e[i].listener||e[i];return t}(r):y(r,r.length)}function f(e){var t=this._events;if(void 0!==t){var i=t[e];if("function"==typeof i)return 1;if(void 0!==i)return i.length}return 0}function y(e,t){for(var i=new Array(t),s=0;s<t;++s)i[s]=e[s];return i}function p(e,t,i,s){if("function"==typeof e.on)s.once?e.once(t,i):e.on(t,i);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function r(n){s.once&&e.removeEventListener(t,r),i(n)}))}}Object.defineProperty(n,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(e){if("number"!=typeof e||e<0||r(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");o=e}}),n.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},n.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||r(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},n.prototype.getMaxListeners=function(){return c(this)},n.prototype.emit=function(e){for(var t=[],i=1;i<arguments.length;i++)t.push(arguments[i]);var r="error"===e,n=this._events;if(void 0!==n)r=r&&void 0===n.error;else if(!r)return!1;if(r){var o;if(t.length>0&&(o=t[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var c=n[e];if(void 0===c)return!1;if("function"==typeof c)s(c,this,t);else{var h=c.length,l=y(c,h);for(i=0;i<h;++i)s(l[i],this,t)}return!0},n.prototype.addListener=function(e,t){return h(this,e,t,!1)},n.prototype.on=n.prototype.addListener,n.prototype.prependListener=function(e,t){return h(this,e,t,!0)},n.prototype.once=function(e,t){return a(t),this.on(e,u(this,e,t)),this},n.prototype.prependOnceListener=function(e,t){return a(t),this.prependListener(e,u(this,e,t)),this},n.prototype.removeListener=function(e,t){var i,s,r,n,o;if(a(t),void 0===(s=this._events))return this;if(void 0===(i=s[e]))return this;if(i===t||i.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete s[e],s.removeListener&&this.emit("removeListener",e,i.listener||t));else if("function"!=typeof i){for(r=-1,n=i.length-1;n>=0;n--)if(i[n]===t||i[n].listener===t){o=i[n].listener,r=n;break}if(r<0)return this;0===r?i.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(i,r),1===i.length&&(s[e]=i[0]),void 0!==s.removeListener&&this.emit("removeListener",e,o||t)}return this},n.prototype.off=n.prototype.removeListener,n.prototype.removeAllListeners=function(e){var t,i,s;if(void 0===(i=this._events))return this;if(void 0===i.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==i[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete i[e]),this;if(0===arguments.length){var r,n=Object.keys(i);for(s=0;s<n.length;++s)"removeListener"!==(r=n[s])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=i[e]))this.removeListener(e,t);else if(void 0!==t)for(s=t.length-1;s>=0;s--)this.removeListener(e,t[s]);return this},n.prototype.listeners=function(e){return d(this,e,!0)},n.prototype.rawListeners=function(e){return d(this,e,!1)},n.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):f.call(e,t)},n.prototype.listenerCount=f,n.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}}},t={};function i(s){var r=t[s];if(void 0!==r)return r.exports;var n=t[s]={exports:{}};return e[s](n,n.exports,i),n.exports}i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var s in t)i.o(t,s)&&!i.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e=i(343),t=i.n(e);class s extends(t()){constructor(e,t,i){super(),this.value=e,this.keyCode=t,this.isChar=i,this.isCapsed=!1,this.isShifted=!1}createElement(e=null){const t=document.createElement("button");return t.className="btn",e&&t.classList.add(e),t.innerHTML=this.value,"ShiftRight"===this.keyCode||"ShiftLeft"===this.keyCode?t.dataset.keyCode="Shift":t.dataset.keyCode=this.keyCode,t}toggleCaps(){this.isCapsed=!this.isCapsed,this.isCapsed?(this.value=this.value.toUpperCase(),this.emit("valueChanged")):(this.value=this.value.toLowerCase(),this.emit("valueChanged"))}toggleShift(e,t){this.isShifted=!this.isShifted,this.isShifted&&Object.prototype.hasOwnProperty.call(e,this.keyCode)?(this.value=e[this.keyCode],this.emit("valueChanged")):Object.prototype.hasOwnProperty.call(e,this.keyCode)&&Object.keys(e).forEach((i=>{e[i]===this.value&&(this.value=t[i],this.emit("valueChanged"))}))}changeLanguage(e){this.value=e[this.keyCode],this.isCapsed&&(this.value=this.value.toUpperCase()),this.emit("valueChanged")}}const r=JSON.parse('{"Backquote":"`","Digit1":"1","Digit2":"2","Digit3":"3","Digit4":"4","Digit5":"5","Digit6":"6","Digit7":"7","Digit8":"8","Digit9":"9","Digit0":"0","Minus":"-","Equal":"=","Backspace":"Backspace","Tab":"Tab ↹","KeyQ":"q","KeyW":"w","KeyE":"e","KeyR":"r","KeyT":"t","KeyY":"y","KeyU":"u","KeyI":"i","KeyO":"o","KeyP":"p","KeyA":"a","KeyS":"s","KeyD":"d","KeyF":"f","KeyG":"g","KeyH":"h","KeyJ":"j","KeyK":"k","KeyL":"l","KeyZ":"z","KeyX":"x","KeyC":"c","KeyV":"v","KeyB":"b","KeyN":"n","KeyM":"m","BracketLeft":"[","BracketRight":"]","Backslash":"\\\\","Semicolon":";","Quote":"\'","Enter":"Enter ↵","ShiftLeft":"⇧","ShiftRight":"Shift ⇧","ControlLeft":"Ctrl","ControlRight":"Ctrl","AltLeft":"Alt","AltRight":"Alt","MetaLeft":"Win","Space":" ","ArrowUp":"↑","ArrowRight":"→","ArrowDown":"↓","ArrowLeft":"←","Delete":"Del","CapsLock":"CapsLock ⇪","Comma":",","Period":".","Slash":"/","Shifted":{"Backquote":"~","Digit1":"!","Digit2":"@","Digit3":"#","Digit4":"$","Digit5":"%","Digit6":"^","Digit7":"&","Digit8":"*","Digit9":"(","Digit0":")","Minus":"_","Equal":"+","BracketLeft":"{","BracketRight":"}","Backslash":"|","Semicolon":":","Quote":"\\"","Comma":"<","Period":">","Slash":"?"}}'),n=JSON.parse('{"Backquote":"ё","Digit1":"1","Digit2":"2","Digit3":"3","Digit4":"4","Digit5":"5","Digit6":"6","Digit7":"7","Digit8":"8","Digit9":"9","Digit0":"0","Minus":"-","Equal":"=","Backspace":"Backspace","Tab":"Tab ↹","KeyQ":"й","KeyW":"ц","KeyE":"у","KeyR":"к","KeyT":"е","KeyY":"н","KeyU":"г","KeyI":"ш","KeyO":"щ","KeyP":"з","KeyA":"ф","KeyS":"ы","KeyD":"в","KeyF":"а","KeyG":"п","KeyH":"р","KeyJ":"о","KeyK":"л","KeyL":"д","KeyZ":"я","KeyX":"ч","KeyC":"с","KeyV":"м","KeyB":"и","KeyN":"т","KeyM":"ь","BracketLeft":"х","BracketRight":"ъ","Backslash":"\\\\","Semicolon":"ж","Quote":"э","Enter":"Enter ↵","ShiftLeft":"⇧","ShiftRight":"Shift ⇧","ControlLeft":"Ctrl","ControlRight":"Ctrl","AltLeft":"Alt","AltRight":"Alt","MetaLeft":"Win","Space":" ","ArrowUp":"↑","ArrowRight":"→","ArrowDown":"↓","ArrowLeft":"←","Delete":"Del","CapsLock":"CapsLock ⇪","Comma":"б","Period":"ю","Slash":".","Shifted":{"Digit1":"!","Digit2":"\\"","Digit3":"№","Digit4":";","Digit5":"%","Digit6":":","Digit7":"?","Digit8":"*","Digit9":"(","Digit0":")","Minus":"_","Equal":"+","Backslash":"/","Slash":","}}'),o=document.querySelector("body"),a=document.createElement("div"),c=document.createElement("textarea"),h=document.createElement("div"),l=document.createElement("h1"),u=document.createElement("p"),d=document.createElement("div"),f=document.createElement("input"),y=document.createElement("label");l.className="title",u.className="description",a.className="wrapper",c.className="textarea",h.className="board",d.className="checkbox-container",f.className="sticky-checkbox",f.type="checkbox",f.id="sticky",f.name="sticky",y.setAttribute("for","sticky"),y.className="checkbox-label",y.textContent="Sticky mode (for virtual Shift and LeftCtrl buttons only)",l.textContent="RSS Virtual Keyboard",u.textContent='This keyboard was created on Windows. To change language press "Left Ctrl + Left Alt".';const p=localStorage.getItem("language"),g=new class{constructor(e,t,i){this.lang=e,this.textArea=i,this.keys=[],this.container=t,this.isPressed={Shift:!1,ControlLeft:!1,ControlRight:!1,AltLeft:!1,CapsLock:!1},this.currentConfig="en"===this.lang?r:n,this.capsCounter=0,this.isCapsPressed=!1}init(){this.keysLayout=["Backquote","Digit1","Digit2","Digit3","Digit4","Digit5","Digit6","Digit7","Digit8","Digit9","Digit0","Minus","Equal","Backspace","Tab","KeyQ","KeyW","KeyE","KeyR","KeyT","KeyY","KeyU","KeyI","KeyO","KeyP","BracketLeft","BracketRight","Backslash","Delete","CapsLock","KeyA","KeyS","KeyD","KeyF","KeyG","KeyH","KeyJ","KeyK","KeyL","Semicolon","Quote","Enter","ShiftLeft","KeyZ","KeyX","KeyC","KeyV","KeyB","KeyN","KeyM","Comma","Period","Slash","ArrowUp","ShiftRight","ControlLeft","MetaLeft","AltLeft","Space","AltRight","ControlRight","ArrowLeft","ArrowDown","ArrowRight"],this.simpleKeys=["Digit1","Digit2","Digit3","Digit4","Digit5","Digit6","Digit7","Digit8","Digit9","Digit0","Minus","Equal","KeyQ","KeyW","KeyE","KeyR","KeyT","KeyY","KeyU","KeyI","KeyO","KeyP","BracketLeft","BracketRight","Backslash","KeyA","KeyS","KeyD","KeyF","KeyG","KeyH","KeyJ","KeyK","KeyL","Semicolon","Quote","KeyZ","KeyX","KeyC","KeyV","KeyB","KeyN","KeyM","Comma","Period","Slash","Space","Backquote","ArrowUp","ArrowLeft","ArrowDown","ArrowRight"],this.keysLayout.forEach((e=>{const t=this.simpleKeys.includes(e)?1:0,i=new s(this.currentConfig[e],e,t);let o;switch(e){case"Tab":case"ControlLeft":case"ControlRight":case"ShiftLeft":o="onefive";break;case"ShiftRight":o="rightshift";break;case"CapsLock":case"Backspace":case"Enter":o="double";break;case"Space":o="space";break;default:o=null}const a=i.createElement(o);switch(i.on("valueChanged",this.renderKeyboard),i.isChar&&this.initListeners(a,this.inputChar,i.value),e){case"Backspace":this.initListeners(a,this.removeChar,"left");break;case"Delete":this.initListeners(a,this.removeChar,"right");break;case"Enter":a.addEventListener("click",(()=>{this.inputChar("\n"),this.textArea.focus()}));break;case"Tab":a.addEventListener("click",(()=>{this.inputChar("\t"),this.textArea.focus()}));break;case"CapsLock":a.addEventListener("mousedown",(()=>{a.classList.toggle("pressed"),this.keys.forEach((e=>{e.isChar&&e.toggleCaps()})),this.textArea.focus()}));break;case"AltLeft":a.addEventListener("click",(()=>{if(this.isPressed.ControlLeft){const e="en"===this.lang?n:r;this.keys.forEach((t=>{t.isChar&&t.changeLanguage(e)})),this.lang="en"===this.lang?"ru":"en",localStorage.setItem("language",this.lang),this.currentConfig=e}})),this.textArea.focus()}this.keys.push(i),this.container.append(a)}));const e=document.querySelector(".sticky-checkbox"),t=document.querySelectorAll("[data-key-code=Shift]"),i=document.querySelector("[data-key-code=ControlLeft]"),o=function(){i.classList.toggle("pressed"),this.isPressed.ControlLeft=!0}.bind(this),a=function(){t.forEach((e=>{e.classList.toggle("pressed")})),this.keys.forEach((e=>{e.isChar&&e.toggleCaps()}))}.bind(this);e.addEventListener("change",(()=>{e.checked?(t.forEach((e=>{e.addEventListener("mousedown",a)})),i.addEventListener("mousedown",o)):(t.forEach((e=>{e.addEventListener("mousedown",a)})),i.removeEventListener("mousedown",o))}))}configuratePhysicalButtons(){document.addEventListener("keydown",(e=>{const t=document.querySelector(`[data-key-code=${e.code}]`);if(t&&"CapsLock"===e.code?(this.capsCounter+=1,this.capsCounter<2&&(t.classList.toggle("pressed"),this.keys.forEach((e=>{e.isChar&&e.toggleCaps()})))):t&&t.classList.add("pressed"),this.keysLayout.includes(e.code)&&e.preventDefault(),this.simpleKeys.includes(e.code)){let t="";this.keys.forEach((i=>{i.keyCode===e.code&&(t=i.value)})),this.inputChar(t)}switch("Shift"===e.key&&(document.querySelectorAll(`[data-key-code=${e.key}]`).forEach((e=>{e.classList.add("pressed")})),this.isPressed[e.key]||this.keys.forEach((e=>{e.isChar&&e.toggleCaps(),e.toggleShift(this.currentConfig.Shifted,this.currentConfig)})),this.isPressed[e.key]=!0),e.code){case"AltLeft":if(this.isPressed.ControlLeft){const t="en"===this.lang?n:r;this.keys.forEach((e=>{e.isChar&&e.changeLanguage(t)})),this.lang="en"===this.lang?"ru":"en",localStorage.setItem("language",this.lang),this.currentConfig=t,this.isPressed[e.code]=!0}break;case"ControlLeft":this.isPressed[e.code]=!0;break;case"Delete":this.removeChar("right");break;case"Tab":this.inputChar("\t");break;case"Enter":this.inputChar("\n");break;case"Backspace":this.removeChar("left")}})),document.addEventListener("keyup",(e=>{const t=document.querySelector(`[data-key-code=${e.code}]`);switch(t&&"CapsLock"!==e.code&&"Shift"!==e.key&&t.classList.remove("pressed"),t&&"CapsLock"===e.code&&(this.capsCounter=0),"Shift"===e.key&&(document.querySelectorAll(`[data-key-code=${e.key}]`).forEach((e=>{e.classList.remove("pressed")})),this.keys.forEach((e=>{e.isChar&&e.toggleCaps(),e.toggleShift(this.currentConfig.Shifted,this.currentConfig)})),this.isPressed[e.key]=!1),e.code){case"AltLeft":case"ControlLeft":this.isPressed[e.code]=!1}}))}renderKeyboard(){document.querySelector(`[data-key-code=${this.keyCode}]`).innerHTML=this.value}inputChar(e){const t=this.textArea.selectionStart,i=this.textArea.selectionEnd;t===i?(this.textArea.value=this.textArea.value.slice(0,t)+e+this.textArea.value.slice(t,this.textArea.value.length),this.textArea.selectionEnd=t+1):(this.textArea.value=this.textArea.value.slice(0,t)+e+this.textArea.value.slice(i,this.textArea.value.length),this.textArea.selectionEnd=t+1)}removeChar(e){const t="left"===e?1:0,i="left"===e?0:1,s=this.textArea.selectionStart,r=this.textArea.selectionEnd;"left"!==e||0!==r?s===r?(this.textArea.value=this.textArea.value.slice(0,s-t)+this.textArea.value.slice(s+i,this.textArea.value.length),this.textArea.selectionEnd=s-t):(this.textArea.value=this.textArea.value.slice(0,s)+this.textArea.value.slice(r,this.textArea.value.length),this.textArea.selectionEnd=s):this.textArea.selectionEnd=s}initListeners(e,t,i){let s=null,r=null;e.addEventListener("mousedown",(()=>{t.call(this,i),this.textArea.focus(),e.classList.add("pressed"),r=setTimeout((()=>{s=setInterval((()=>{t.call(this,i),this.textArea.focus(),e.classList.add("pressed")}),40)}),500)})),e.addEventListener("mouseout",(()=>{clearInterval(s),clearTimeout(r),this.textArea.focus(),e.classList.remove("pressed")})),e.addEventListener("mouseup",(()=>{clearInterval(s),clearTimeout(r),this.textArea.focus(),e.classList.remove("pressed")}))}}(p,h,c);d.append(f),d.append(y),a.append(l),a.append(c),a.append(h),a.append(u),a.append(d),o.append(a),g.init(),g.configuratePhysicalButtons()})()})();