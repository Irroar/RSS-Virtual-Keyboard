(()=>{"use strict";var e={343:e=>{var t,i="object"==typeof Reflect?Reflect:null,s=i&&"function"==typeof i.apply?i.apply:function(e,t,i){return Function.prototype.apply.call(e,t,i)};t=i&&"function"==typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var r=Number.isNaN||function(e){return e!=e};function n(){n.init.call(this)}e.exports=n,e.exports.once=function(e,t){return new Promise((function(i,s){function r(i){e.removeListener(t,n),s(i)}function n(){"function"==typeof e.removeListener&&e.removeListener("error",r),i([].slice.call(arguments))}y(e,t,n,{once:!0}),"error"!==t&&function(e,t,i){"function"==typeof e.on&&y(e,"error",t,{once:!0})}(e,r)}))},n.EventEmitter=n,n.prototype._events=void 0,n.prototype._eventsCount=0,n.prototype._maxListeners=void 0;var a=10;function o(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function l(e){return void 0===e._maxListeners?n.defaultMaxListeners:e._maxListeners}function c(e,t,i,s){var r,n,a,c;if(o(i),void 0===(n=e._events)?(n=e._events=Object.create(null),e._eventsCount=0):(void 0!==n.newListener&&(e.emit("newListener",t,i.listener?i.listener:i),n=e._events),a=n[t]),void 0===a)a=n[t]=i,++e._eventsCount;else if("function"==typeof a?a=n[t]=s?[i,a]:[a,i]:s?a.unshift(i):a.push(i),(r=l(e))>0&&a.length>r&&!a.warned){a.warned=!0;var h=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");h.name="MaxListenersExceededWarning",h.emitter=e,h.type=t,h.count=a.length,c=h,console&&console.warn&&console.warn(c)}return e}function h(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function u(e,t,i){var s={fired:!1,wrapFn:void 0,target:e,type:t,listener:i},r=h.bind(s);return r.listener=i,s.wrapFn=r,r}function f(e,t,i){var s=e._events;if(void 0===s)return[];var r=s[t];return void 0===r?[]:"function"==typeof r?i?[r.listener||r]:[r]:i?function(e){for(var t=new Array(e.length),i=0;i<t.length;++i)t[i]=e[i].listener||e[i];return t}(r):v(r,r.length)}function d(e){var t=this._events;if(void 0!==t){var i=t[e];if("function"==typeof i)return 1;if(void 0!==i)return i.length}return 0}function v(e,t){for(var i=new Array(t),s=0;s<t;++s)i[s]=e[s];return i}function y(e,t,i,s){if("function"==typeof e.on)s.once?e.once(t,i):e.on(t,i);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function r(n){s.once&&e.removeEventListener(t,r),i(n)}))}}Object.defineProperty(n,"defaultMaxListeners",{enumerable:!0,get:function(){return a},set:function(e){if("number"!=typeof e||e<0||r(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");a=e}}),n.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},n.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||r(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},n.prototype.getMaxListeners=function(){return l(this)},n.prototype.emit=function(e){for(var t=[],i=1;i<arguments.length;i++)t.push(arguments[i]);var r="error"===e,n=this._events;if(void 0!==n)r=r&&void 0===n.error;else if(!r)return!1;if(r){var a;if(t.length>0&&(a=t[0]),a instanceof Error)throw a;var o=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw o.context=a,o}var l=n[e];if(void 0===l)return!1;if("function"==typeof l)s(l,this,t);else{var c=l.length,h=v(l,c);for(i=0;i<c;++i)s(h[i],this,t)}return!0},n.prototype.addListener=function(e,t){return c(this,e,t,!1)},n.prototype.on=n.prototype.addListener,n.prototype.prependListener=function(e,t){return c(this,e,t,!0)},n.prototype.once=function(e,t){return o(t),this.on(e,u(this,e,t)),this},n.prototype.prependOnceListener=function(e,t){return o(t),this.prependListener(e,u(this,e,t)),this},n.prototype.removeListener=function(e,t){var i,s,r,n,a;if(o(t),void 0===(s=this._events))return this;if(void 0===(i=s[e]))return this;if(i===t||i.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete s[e],s.removeListener&&this.emit("removeListener",e,i.listener||t));else if("function"!=typeof i){for(r=-1,n=i.length-1;n>=0;n--)if(i[n]===t||i[n].listener===t){a=i[n].listener,r=n;break}if(r<0)return this;0===r?i.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(i,r),1===i.length&&(s[e]=i[0]),void 0!==s.removeListener&&this.emit("removeListener",e,a||t)}return this},n.prototype.off=n.prototype.removeListener,n.prototype.removeAllListeners=function(e){var t,i,s;if(void 0===(i=this._events))return this;if(void 0===i.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==i[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete i[e]),this;if(0===arguments.length){var r,n=Object.keys(i);for(s=0;s<n.length;++s)"removeListener"!==(r=n[s])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=i[e]))this.removeListener(e,t);else if(void 0!==t)for(s=t.length-1;s>=0;s--)this.removeListener(e,t[s]);return this},n.prototype.listeners=function(e){return f(this,e,!0)},n.prototype.rawListeners=function(e){return f(this,e,!1)},n.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):d.call(e,t)},n.prototype.listenerCount=d,n.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}}},t={};function i(s){var r=t[s];if(void 0!==r)return r.exports;var n=t[s]={exports:{}};return e[s](n,n.exports,i),n.exports}i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var s in t)i.o(t,s)&&!i.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e=i(343),t=i.n(e);class s extends(t()){constructor(e,t,i){super(),this.value=e,this.keyCode=t,this.isChar=i,this.isCapsed=!1,this.isShifted=!1}createElement(e=null){const t=document.createElement("button");return t.className="btn",e&&t.classList.add(e),t.innerHTML=this.value,t.dataset.keyCode=this.keyCode,t}toggleCaps(){this.isCapsed=!this.isCapsed,this.isCapsed?(this.value=this.value.toUpperCase(),this.emit("valueChanged")):(this.value=this.value.toLowerCase(),this.emit("valueChanged"))}toggleShift(e,t){this.isShifted=!this.isShifted,this.isShifted&&Object.prototype.hasOwnProperty.call(e,this.keyCode)?(this.value=e[this.keyCode],this.emit("valueChanged")):Object.prototype.hasOwnProperty.call(e,this.keyCode)&&Object.keys(e).forEach((i=>{e[i]===this.value&&(this.value=t[i],this.emit("valueChanged"))}))}changeLanguage(e){this.value=e[this.keyCode],this.emit("valueChanged")}}const r=JSON.parse('{"Backquote":"`","Digit1":"1","Digit2":"2","Digit3":"3","Digit4":"4","Digit5":"5","Digit6":"6","Digit7":"7","Digit8":"8","Digit9":"9","Digit0":"0","Minus":"-","Equal":"=","Backspace":"Backspace","Tab":"Tab ↹","KeyQ":"q","KeyW":"w","KeyE":"e","KeyR":"r","KeyT":"t","KeyY":"y","KeyU":"u","KeyI":"i","KeyO":"o","KeyP":"p","KeyA":"a","KeyS":"s","KeyD":"d","KeyF":"f","KeyG":"g","KeyH":"h","KeyJ":"j","KeyK":"k","KeyL":"l","KeyZ":"z","KeyX":"x","KeyC":"c","KeyV":"v","KeyB":"b","KeyN":"n","KeyM":"m","BracketLeft":"[","BracketRight":"]","Backslash":"\\\\","Semicolon":";","Quote":"\'","Enter":"Enter ↵","ShiftLeft":"⇧","ShiftRight":"Shift ⇧","ControlLeft":"Ctrl","ControlRight":"Ctrl","AltLeft":"Alt","AltRight":"Alt","MetaLeft":"Win","Space":" ","ArrowUp":"↑","ArrowRight":"→","ArrowDown":"↓","ArrowLeft":"←","Delete":"Del","CapsLock":"CapsLock ⇪","Comma":",","Period":".","Slash":"/","Shifted":{"Backquote":"~","Digit1":"!","Digit2":"@","Digit3":"#","Digit4":"$","Digit5":"%","Digit6":"^","Digit7":"&","Digit8":"*","Digit9":"(","Digit0":")","Minus":"_","Equal":"+","BracketLeft":"{","BracketRight":"}","Backslash":"|","Semicolon":":","Quote":"\\"","Comma":"<","Period":">","Slash":"?"}}'),n=JSON.parse('{"Backquote":"ё","Digit1":"1","Digit2":"2","Digit3":"3","Digit4":"4","Digit5":"5","Digit6":"6","Digit7":"7","Digit8":"8","Digit9":"9","Digit0":"0","Minus":"-","Equal":"=","Backspace":"Backspace","Tab":"Tab ↹","KeyQ":"й","KeyW":"ц","KeyE":"у","KeyR":"к","KeyT":"е","KeyY":"н","KeyU":"г","KeyI":"ш","KeyO":"щ","KeyP":"з","KeyA":"ф","KeyS":"ы","KeyD":"в","KeyF":"а","KeyG":"п","KeyH":"р","KeyJ":"о","KeyK":"л","KeyL":"д","KeyZ":"я","KeyX":"ч","KeyC":"с","KeyV":"м","KeyB":"и","KeyN":"т","KeyM":"ь","BracketLeft":"х","BracketRight":"ъ","Backslash":"\\\\","Semicolon":"ж","Quote":"э","Enter":"Enter ↵","ShiftLeft":"⇧","ShiftRight":"Shift ⇧","ControlLeft":"Ctrl","ControlRight":"Ctrl","AltLeft":"Alt","AltRight":"Alt","MetaLeft":"Win","Space":" ","ArrowUp":"↑","ArrowRight":"→","ArrowDown":"↓","ArrowLeft":"←","Delete":"Del","CapsLock":"CapsLock ⇪","Comma":"б","Period":"ю","Slash":".","Shifted":{"Digit1":"!","Digit2":"\\"","Digit3":"№","Digit4":";","Digit5":"%","Digit6":":","Digit7":"?","Digit8":"*","Digit9":"(","Digit0":")","Minus":"_","Equal":"+","Backslash":"/","Slash":","}}'),a=document.querySelector("body"),o=document.createElement("div"),l=document.createElement("textarea"),c=document.createElement("div"),h=document.createElement("h1"),u=document.createElement("p");h.className="title",u.className="description",o.className="wrapper",l.className="textarea",c.className="board",h.textContent="RSS Virtual Keyboard",u.textContent='This keyboard was created on Windows. To change language press "Left Ctrl + Left Alt".';const f=localStorage.getItem("language"),d=new class{constructor(e,t,i){this.lang=e,this.textArea=i,this.keys=[],this.container=t,this.isPressed={ShiftLeft:!1,ShiftRight:!1,ControlLeft:!1,ControlRight:!1,AltLeft:!1,CapsLock:!1},this.currentConfig="en"===this.lang?r:n,this.capsCounter=0}init(){this.keysLayout=["Backquote","Digit1","Digit2","Digit3","Digit4","Digit5","Digit6","Digit7","Digit8","Digit9","Digit0","Minus","Equal","Backspace","Tab","KeyQ","KeyW","KeyE","KeyR","KeyT","KeyY","KeyU","KeyI","KeyO","KeyP","BracketLeft","BracketRight","Backslash","Delete","CapsLock","KeyA","KeyS","KeyD","KeyF","KeyG","KeyH","KeyJ","KeyK","KeyL","Semicolon","Quote","Enter","ShiftLeft","KeyZ","KeyX","KeyC","KeyV","KeyB","KeyN","KeyM","Comma","Period","Slash","ArrowUp","ShiftRight","ControlLeft","MetaLeft","AltLeft","Space","AltRight","ControlRight","ArrowLeft","ArrowDown","ArrowRight"],this.simpleKeys=["Digit1","Digit2","Digit3","Digit4","Digit5","Digit6","Digit7","Digit8","Digit9","Digit0","Minus","Equal","KeyQ","KeyW","KeyE","KeyR","KeyT","KeyY","KeyU","KeyI","KeyO","KeyP","BracketLeft","BracketRight","Backslash","KeyA","KeyS","KeyD","KeyF","KeyG","KeyH","KeyJ","KeyK","KeyL","Semicolon","Quote","KeyZ","KeyX","KeyC","KeyV","KeyB","KeyN","KeyM","Comma","Period","Slash","Space","Backquote","ArrowUp","ArrowLeft","ArrowDown","ArrowRight"],this.keysLayout.forEach((e=>{const t=this.simpleKeys.includes(e)?1:0,i=new s(this.currentConfig[e],e,t);let r;switch(e){case"Tab":case"ControlLeft":case"ControlRight":case"ShiftLeft":r="onefive";break;case"ShiftRight":r="rightshift";break;case"CapsLock":case"Backspace":case"Enter":r="double";break;case"Space":r="space";break;default:r=null}const n=i.createElement(r);if(i.on("valueChanged",this.renderKeyboard),i.isChar){let e=null;n.addEventListener("mousedown",(()=>{e=setInterval((()=>{const e=this.textArea.selectionStart,t=this.textArea.selectionEnd;e===t?(this.textArea.value=this.textArea.value.slice(0,e)+i.value+this.textArea.value.slice(e,this.textArea.value.length),this.textArea.focus(),this.textArea.selectionEnd=e+1):(this.textArea.value=this.textArea.value.slice(0,e)+i.value+this.textArea.value.slice(t,this.textArea.value.length),this.textArea.focus(),this.textArea.selectionEnd=e+1),n.classList.add("pressed")}),40)})),n.addEventListener("mouseup",(()=>{clearInterval(e),n.classList.remove("pressed")}))}switch(e){case"Backspace":n.addEventListener("click",(()=>{const e=this.textArea.selectionStart,t=this.textArea.selectionEnd;if(0===t)return this.textArea.focus(),void(this.textArea.selectionEnd=e);e===t?(this.textArea.value=this.textArea.value.slice(0,e-1)+this.textArea.value.slice(e,this.textArea.value.length),this.textArea.focus(),this.textArea.selectionEnd=e-1):(this.textArea.value=this.textArea.value.slice(0,e)+this.textArea.value.slice(t,this.textArea.value.length),this.textArea.focus(),this.textArea.selectionEnd=e)}));break;case"Delete":n.addEventListener("click",(()=>{const e=this.textArea.selectionStart,t=this.textArea.selectionEnd;e===t?(this.textArea.value=this.textArea.value.slice(0,e)+this.textArea.value.slice(e+1,this.textArea.value.length),this.textArea.focus(),this.textArea.selectionEnd=e):(this.textArea.value=this.textArea.value.slice(0,e)+this.textArea.value.slice(t,this.textArea.value.length),this.textArea.focus(),this.textArea.selectionEnd=e)}));break;case"Enter":n.addEventListener("click",(()=>{const e=this.textArea.selectionStart,t=this.textArea.selectionEnd;e===t?(this.textArea.value=`${this.textArea.value.slice(0,e)}\n${this.textArea.value.slice(e,this.textArea.value.length)}`,this.textArea.focus(),this.textArea.selectionEnd=e+1):(this.textArea.value=`${this.textArea.value.slice(0,e)}\n${this.textArea.value.slice(t,this.textArea.value.length)}`,this.textArea.focus(),this.textArea.selectionEnd=e+1)}));break;case"Tab":n.addEventListener("click",(()=>{const e=this.textArea.selectionStart,t=this.textArea.selectionEnd;e===t?(this.textArea.value=`${this.textArea.value.slice(0,e)}\t${this.textArea.value.slice(e,this.textArea.value.length)}`,this.textArea.focus(),this.textArea.selectionEnd=e+1):(this.textArea.value=`${this.textArea.value.slice(0,e)}\t${this.textArea.value.slice(t,this.textArea.value.length)}`,this.textArea.focus(),this.textArea.selectionEnd=e+1)}));break;case"CapsLock":n.addEventListener("click",(()=>{n.classList.toggle("pressed"),this.keys.forEach((e=>{e.isChar&&e.toggleCaps()}))}))}this.keys.push(i),this.container.append(n)}))}configuratePhysicalButtons(){document.addEventListener("keydown",(e=>{const t=document.querySelector(`[data-key-code=${e.code}]`);if(t&&"CapsLock"===e.code?this.capsCounter<2&&t.classList.toggle("pressed"):t&&t.classList.add("pressed"),this.keysLayout.includes(e.code)&&e.preventDefault(),this.simpleKeys.includes(e.code)){const t=this.textArea.selectionStart,i=this.textArea.selectionEnd;let s="";this.keys.forEach((t=>{t.keyCode===e.code&&(s=t.value)})),t===i?(this.textArea.value=this.textArea.value.slice(0,t)+s+this.textArea.value.slice(t,this.textArea.value.length),this.textArea.focus(),this.textArea.selectionEnd=t+1):(this.textArea.value=this.textArea.value.slice(0,t)+s+this.textArea.value.slice(i,this.textArea.value.length),this.textArea.focus(),this.textArea.selectionEnd=t+1)}switch(e.code){case"ShiftLeft":case"ShiftRight":this.isPressed[e.code]||this.keys.forEach((e=>{e.isChar&&e.toggleCaps(),e.toggleShift(this.currentConfig.Shifted,this.currentConfig)})),this.isPressed[e.code]=!0;break;case"AltLeft":if(this.isPressed.ControlLeft||this.isPressed.ControlRight){const t="en"===this.lang?n:r;this.keys.forEach((e=>{e.isChar&&e.changeLanguage(t)})),this.lang="en"===this.lang?"ru":"en",localStorage.setItem("language",this.lang),this.currentConfig=t,this.isPressed[e.code]=!0}break;case"ControlLeft":this.isPressed[e.code]=!0;break;case"Delete":{const e=this.textArea.selectionStart,t=this.textArea.selectionEnd;e===t?(this.textArea.value=this.textArea.value.slice(0,e)+this.textArea.value.slice(e+1,this.textArea.value.length),this.textArea.focus(),this.textArea.selectionEnd=e):(this.textArea.value=this.textArea.value.slice(0,e)+this.textArea.value.slice(t,this.textArea.value.length),this.textArea.focus(),this.textArea.selectionEnd=e);break}case"CapsLock":this.keys.forEach((e=>{e.isChar&&e.toggleCaps()}));break;case"Tab":{const e=this.textArea.selectionStart,t=this.textArea.selectionEnd;e===t?(this.textArea.value=`${this.textArea.value.slice(0,e)}\t${this.textArea.value.slice(e,this.textArea.value.length)}`,this.textArea.focus(),this.textArea.selectionEnd=e+1):(this.textArea.value=`${this.textArea.value.slice(0,e)}\t${this.textArea.value.slice(t,this.textArea.value.length)}`,this.textArea.focus(),this.textArea.selectionEnd=e+1);break}case"Enter":{const e=this.textArea.selectionStart,t=this.textArea.selectionEnd;e===t?(this.textArea.value=`${this.textArea.value.slice(0,e)}\n${this.textArea.value.slice(e,this.textArea.value.length)}`,this.textArea.focus(),this.textArea.selectionEnd=e+1):(this.textArea.value=`${this.textArea.value.slice(0,e)}\n${this.textArea.value.slice(t,this.textArea.value.length)}`,this.textArea.focus(),this.textArea.selectionEnd=e+1);break}case"Backspace":{const e=this.textArea.selectionStart,t=this.textArea.selectionEnd;if(0===t){this.textArea.focus(),this.textArea.selectionEnd=e;break}e===t?(this.textArea.value=this.textArea.value.slice(0,e-1)+this.textArea.value.slice(e,this.textArea.value.length),this.textArea.focus(),this.textArea.selectionEnd=e-1):(this.textArea.value=this.textArea.value.slice(0,e)+this.textArea.value.slice(t,this.textArea.value.length),this.textArea.focus(),this.textArea.selectionEnd=e);break}}})),document.addEventListener("keyup",(e=>{const t=document.querySelector(`[data-key-code=${e.code}]`);switch(t&&"CapsLock"!==e.code&&t.classList.remove("pressed"),t&&"CapsLock"===e.code&&(this.capsCounter=0),e.code){case"ShiftLeft":case"ShiftRight":this.keys.forEach((e=>{e.isChar&&e.toggleCaps(),e.toggleShift(this.currentConfig.Shifted,this.currentConfig)})),this.isPressed[e.code]=!1;break;case"AltLeft":case"ControlLeft":this.isPressed[e.code]=!1}}))}renderKeyboard(){document.querySelector(`[data-key-code=${this.keyCode}]`).innerHTML=this.value}}(f,c,l);o.append(h),o.append(l),o.append(c),o.append(u),a.append(o),d.init(),d.configuratePhysicalButtons()})()})();